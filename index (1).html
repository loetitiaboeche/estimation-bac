<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estimation Bac 2026 - Calculateur Officiel Baccalaur√©at</title>
    <meta name="description" content="Calculez votre estimation au baccalaur√©at 2025-2026. Import PDF, saisie manuelle ou simulateur direct. Donn√©es officielles du Minist√®re.">
    <meta name="keywords" content="bac 2026, calculateur bac, estimation bac, simulateur bac, orientation post-bac, coefficients bac">
    <meta name="author" content="NSica">
    <meta name="robots" content="index, follow">
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Estimation Bac",
      "description": "Calculateur d'estimation pour le baccalaur√©at g√©n√©ral 2025-2026 avec simulateur intelligent",
      "url": "https://estimation-bac.fr",
      "publisher": {
        "@type": "Organization",
        "name": "NSica",
        "address": {
          "@type": "PostalAddress",
          "streetAddress": "179 avenue de Muret",
          "addressLocality": "Toulouse",
          "postalCode": "31300",
          "addressCountry": "FR"
        },
        "telephone": "+33562200804"
      }
    }
    </script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            padding-bottom: 150px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        h1 { font-size: 2em; margin-bottom: 10px; }
        .subtitle { opacity: 0.9; font-size: 1.1em; }
        .badge-officiel {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            margin-top: 10px;
            font-size: 0.9em;
        }
        .hero-banner {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            padding: 40px 30px;
            text-align: center;
            border-bottom: 4px solid #667eea;
        }
        .hero-banner h2 { color: #667eea; font-size: 1.8em; margin-bottom: 20px; }
        .hero-banner p { color: #555; font-size: 1.1em; line-height: 1.8; max-width: 800px; margin: 0 auto 20px; }
        .hero-features { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; margin-top: 25px; }
        .hero-feature { background: white; padding: 15px 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .main-content { padding: 30px; }
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .tab {
            flex: 1;
            min-width: 150px;
            padding: 15px 20px;
            background: #f0f0f0;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
        }
        .tab:hover { background: #e0e0e0; }
        .tab.active { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .step-container {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }
        .step-title { color: #667eea; font-size: 1.5em; margin-bottom: 20px; text-align: center; }
        .mode-choice { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin: 30px 0; }
        .mode-card {
            background: white;
            border: 3px solid #ddd;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        .mode-card:hover { border-color: #667eea; transform: translateY(-5px); box-shadow: 0 10px 25px rgba(102,126,234,0.3); }
        .mode-card.selected { border-color: #667eea; background: #e3f2fd; }
        .mode-card h3 { font-size: 3em; margin-bottom: 15px; }
        .choice-option {
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 10px 0;
        }
        .choice-option:hover { border-color: #667eea; }
        .choice-option.selected { border-color: #667eea; background: #e3f2fd; }
        .button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            margin: 10px 5px;
        }
        .button:hover { transform: translateY(-2px); }
        .button.secondary { background: #6c757d; }
        .button.success { background: #28a745; }
        .button.warning { background: #ffc107; color: #333; }
        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .info-box.success { background: #d4edda; border-left-color: #28a745; }
        .info-box.warning { background: #fff3cd; border-left-color: #ffc107; }
        .results {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
        }
        .result-item { background: rgba(255,255,255,0.2); padding: 15px 20px; border-radius: 10px; margin-bottom: 15px; }
        .mode-switch { display: flex; gap: 10px; margin: 20px 0; justify-content: center; flex-wrap: wrap; }
        .mode-btn {
            flex: 1;
            max-width: 300px;
            padding: 15px 20px;
            background: rgba(255,255,255,0.2);
            border: 2px solid white;
            color: white;
            border-radius: 10px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        .mode-btn.active { background: white; color: #667eea; }
        .slider-container { margin: 20px 0; padding: 15px; background: #f8f9ff; border-radius: 8px; }
        .slider-label { display: flex; justify-content: space-between; margin-bottom: 10px; font-weight: 600; }
        input[type="range"] { width: 100%; height: 8px; border-radius: 5px; background: #ddd; outline: none; }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }
        .mention-badge {
            background: white;
            color: #667eea;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 700;
            display: inline-block;
            margin-top: 10px;
        }
        .mention-badge.tb { background: #FFD700; color: #333; }
        .mention-badge.b { background: #C0C0C0; color: #333; }
        .mention-badge.ab { background: #CD7F32; color: white; }
        .progress-bar {
            width: 100%;
            height: 30px;
            background: rgba(255,255,255,0.3);
            border-radius: 15px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .modal-overlay.show { display: flex; }
        .modal-content {
            background: white;
            border-radius: 20px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            animation: modalSlideIn 0.3s ease;
        }
        @keyframes modalSlideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            border-radius: 20px 20px 0 0;
        }
        .modal-header h2 { font-size: 1.5em; margin-bottom: 10px; }
        .modal-body { padding: 30px; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 8px; color: #333; }
        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="number"],
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }
        .form-group input:focus,
        .form-group select:focus { outline: none; border-color: #667eea; }
        .form-group small { color: #666; font-size: 0.85em; display: block; margin-top: 5px; }
        .modal-actions { display: flex; gap: 10px; justify-content: center; margin-top: 25px; }
        .coef-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        .coef-table th, .coef-table td { padding: 10px; border: 1px solid #ddd; text-align: left; }
        .coef-table th { background: #f0f0f0; font-weight: 600; }
        footer {
            background: #2c3e50;
            color: white;
            padding: 30px 20px;
            margin-top: 50px;
        }
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }
        .footer-section h3 { color: #3498db; margin-bottom: 15px; }
        .footer-section p, .footer-section a { color: #ecf0f1; line-height: 1.8; font-size: 0.9em; }
        .footer-section a { text-decoration: none; }
        .footer-section a:hover { color: #3498db; }
        .footer-bottom {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #34495e;
            font-size: 0.85em;
            color: #95a5a6;
        }
        .hidden { display: none; }
        .section { background: #f9f9f9; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
        .section h2 { color: #667eea; margin-bottom: 15px; font-size: 1.3em; }
        @media (max-width: 768px) {
            h1 { font-size: 1.5em; }
            .hero-banner h2 { font-size: 1.4em; }
            .tabs { flex-direction: column; }
            .mode-choice { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div id="contactModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üéì Merci pour votre int√©r√™t !</h2>
                <p>Aidez-nous √† am√©liorer cet outil</p>
            </div>
            <div class="modal-body">
                <form id="contactForm">
                    <div class="form-group">
                        <label for="userName">Pr√©nom / Nom</label>
                        <input type="text" id="userName" placeholder="Ex: Julie Dupont" required>
                    </div>
                    <div class="form-group">
                        <label for="userEmail">Email</label>
                        <input type="email" id="userEmail" placeholder="Ex: julie@email.fr" required>
                        <small>Vos donn√©es restent priv√©es et ne seront jamais partag√©es</small>
                    </div>
                    <div class="form-group">
                        <label>Vos 3 v≈ìux d'orientation post-bac</label>
                        <small style="margin-bottom:10px;">S√©lectionnez vos domaines d'int√©r√™t (optionnel)</small>
                        <select id="voeu1" style="margin-top:10px;">
                            <option value="">V≈ìu 1 (optionnel)</option>
                            <option value="Licence Droit">Licence Droit</option>
                            <option value="Licence √âconomie-Gestion">Licence √âconomie-Gestion</option>
                            <option value="Licence Lettres/Langues">Licence Lettres/Langues</option>
                            <option value="Licence Sciences Humaines">Licence Sciences Humaines</option>
                            <option value="Licence Sciences et Technologies">Licence Sciences et Technologies</option>
                            <option value="Licence STAPS">Licence STAPS</option>
                            <option value="Licence Sant√© (PASS/LAS)">Licence Sant√© (PASS/LAS)</option>
                            <option value="CPGE Scientifique">CPGE Scientifique</option>
                            <option value="CPGE √âconomique">CPGE √âconomique</option>
                            <option value="CPGE Litt√©raire">CPGE Litt√©raire</option>
                            <option value="√âcole d'Ing√©nieurs">√âcole d'Ing√©nieurs</option>
                            <option value="√âcole de Commerce">√âcole de Commerce</option>
                            <option value="√âcole d'Architecture">√âcole d'Architecture</option>
                            <option value="√âcole d'Art/Design">√âcole d'Art/Design</option>
                            <option value="IEP (Sciences Po)">IEP (Sciences Po)</option>
                            <option value="BTS">BTS</option>
                            <option value="BUT">BUT</option>
                            <option value="Alternance">Alternance</option>
                            <option value="Autre projet">Autre projet</option>
                            <option value="Pas encore d√©cid√©">Pas encore d√©cid√©</option>
                        </select>
                        <select id="voeu2" style="margin-top:10px;">
                            <option value="">V≈ìu 2 (optionnel)</option>
                            <option value="Licence Droit">Licence Droit</option>
                            <option value="Licence √âconomie-Gestion">Licence √âconomie-Gestion</option>
                            <option value="Licence Lettres/Langues">Licence Lettres/Langues</option>
                            <option value="Licence Sciences Humaines">Licence Sciences Humaines</option>
                            <option value="Licence Sciences et Technologies">Licence Sciences et Technologies</option>
                            <option value="Licence STAPS">Licence STAPS</option>
                            <option value="Licence Sant√© (PASS/LAS)">Licence Sant√© (PASS/LAS)</option>
                            <option value="CPGE Scientifique">CPGE Scientifique</option>
                            <option value="CPGE √âconomique">CPGE √âconomique</option>
                            <option value="CPGE Litt√©raire">CPGE Litt√©raire</option>
                            <option value="√âcole d'Ing√©nieurs">√âcole d'Ing√©nieurs</option>
                            <option value="√âcole de Commerce">√âcole de Commerce</option>
                            <option value="√âcole d'Architecture">√âcole d'Architecture</option>
                            <option value="√âcole d'Art/Design">√âcole d'Art/Design</option>
                            <option value="IEP (Sciences Po)">IEP (Sciences Po)</option>
                            <option value="BTS">BTS</option>
                            <option value="BUT">BUT</option>
                            <option value="Alternance">Alternance</option>
                            <option value="Autre projet">Autre projet</option>
                            <option value="Pas encore d√©cid√©">Pas encore d√©cid√©</option>
                        </select>
                        <select id="voeu3" style="margin-top:10px;">
                            <option value="">V≈ìu 3 (optionnel)</option>
                            <option value="Licence Droit">Licence Droit</option>
                            <option value="Licence √âconomie-Gestion">Licence √âconomie-Gestion</option>
                            <option value="Licence Lettres/Langues">Licence Lettres/Langues</option>
                            <option value="Licence Sciences Humaines">Licence Sciences Humaines</option>
                            <option value="Licence Sciences et Technologies">Licence Sciences et Technologies</option>
                            <option value="Licence STAPS">Licence STAPS</option>
                            <option value="Licence Sant√© (PASS/LAS)">Licence Sant√© (PASS/LAS)</option>
                            <option value="CPGE Scientifique">CPGE Scientifique</option>
                            <option value="CPGE √âconomique">CPGE √âconomique</option>
                            <option value="CPGE Litt√©raire">CPGE Litt√©raire</option>
                            <option value="√âcole d'Ing√©nieurs">√âcole d'Ing√©nieurs</option>
                            <option value="√âcole de Commerce">√âcole de Commerce</option>
                            <option value="√âcole d'Architecture">√âcole d'Architecture</option>
                            <option value="√âcole d'Art/Design">√âcole d'Art/Design</option>
                            <option value="IEP (Sciences Po)">IEP (Sciences Po)</option>
                            <option value="BTS">BTS</option>
                            <option value="BUT">BUT</option>
                            <option value="Alternance">Alternance</option>
                            <option value="Autre projet">Autre projet</option>
                            <option value="Pas encore d√©cid√©">Pas encore d√©cid√©</option>
                        </select>
                    </div>
                    <div class="modal-actions">
                        <button type="submit" class="button success">‚úÖ Valider</button>
                        <button type="button" class="button secondary" onclick="closeModal()">Passer</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="container">
        <header>
            <h1>üìö Estimation Bac</h1>
            <p class="subtitle">Calculateur de r√©sultats au baccalaur√©at g√©n√©ral 2025-2026</p>
            <div class="badge-officiel">‚úì Calculs bas√©s sur les coefficients officiels du Minist√®re de l'√âducation Nationale</div>
        </header>

        <div class="hero-banner">
            <h2>üéØ Estimez vos r√©sultats au Bac en 3 clics !</h2>
            <p>
                <strong>Importez votre bulletin, saisissez vos notes ou utilisez le simulateur</strong> pour d√©couvrir 
                <strong>exactement quelles notes obtenir</strong> pour d√©crocher la mention de vos r√™ves !
            </p>
            <div class="hero-features">
                <div class="hero-feature"><span style="font-size:1.5em;">üì§</span> <strong>Import PDF</strong></div>
                <div class="hero-feature"><span style="font-size:1.5em;">‚úçÔ∏è</span> <strong>Saisie manuelle</strong></div>
                <div class="hero-feature"><span style="font-size:1.5em;">üéØ</span> <strong>Simulateur</strong></div>
                <div class="hero-feature"><span style="font-size:1.5em;">üîÑ</span> <strong>Illimit√©</strong></div>
            </div>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="showMainTab('start')">üöÄ D√©marrer</button>
                <button class="tab" onclick="showMainTab('info')">üìñ Comment √ßa marche ?</button>
                <button class="tab" onclick="showMainTab('coefficients')">üìä Coefficients</button>
            </div>

            <div id="start" class="tab-content active">
                <div id="step1" class="step-container">
                    <h2 class="step-title">Comment souhaitez-vous commencer ?</h2>
                    <div class="mode-choice">
                        <div class="mode-card" onclick="selectMode('pdf')">
                            <h3>üì§</h3>
                            <h4>Importer bulletin</h4>
                            <p>Upload PDF automatique</p>
                        </div>
                        <div class="mode-card" onclick="selectMode('manual')">
                            <h3>‚úçÔ∏è</h3>
                            <h4>Saisir notes</h4>
                            <p>Formulaire complet</p>
                        </div>
                        <div class="mode-card" onclick="selectMode('simulator')">
                            <h3>üéØ</h3>
                            <h4>Simulateur</h4>
                            <p>Testez des sc√©narios</p>
                        </div>
                    </div>
                </div>

                <div id="step2" class="step-container hidden">
                    <h2 class="step-title">Vous √™tes en...</h2>
                    <div>
                        <div class="choice-option" onclick="selectClasse('premiere')">
                            <input type="radio" name="classe" value="premiere">
                            <strong>Premi√®re</strong>
                        </div>
                        <div class="choice-option" onclick="selectClasse('terminale')">
                            <input type="radio" name="classe" value="terminale">
                            <strong>Terminale</strong>
                        </div>
                    </div>
                    <div style="text-align:center;margin-top:20px;">
                        <button class="button" onclick="goToStep(1)">‚Üê Retour</button>
                        <button class="button success" onclick="goToStep(3)">Suivant ‚Üí</button>
                    </div>
                </div>

                <div id="step3" class="step-container hidden">
                    <h2 class="step-title">Vos 2 sp√©cialit√©s</h2>
                    <div class="info-box">
                        <p><strong>S√©lectionnez les 2 sp√©cialit√©s que vous gardez en Terminale</strong></p>
                        <p style="margin-top:5px;">La 3√®me sera consid√©r√©e comme abandonn√©e (coefficient 8)</p>
                    </div>
                    <div id="specialitesGrid"></div>
                    <div style="text-align:center;margin-top:20px;">
                        <button class="button" onclick="goToStep(2)">‚Üê Retour</button>
                        <button class="button success" onclick="validateSpecialites()">Valider ‚Üí</button>
                    </div>
                </div>

                <div id="step4" class="step-container hidden"></div>
                <div id="resultsZone"></div>
            </div>

            <div id="info" class="tab-content">
                <div class="section">
                    <h2>üìñ Comment fonctionne le baccalaur√©at g√©n√©ral ?</h2>
                    <h3 style="color: #667eea; margin-top: 20px;">R√©partition de la note finale</h3>
                    <ul style="line-height: 2; margin: 15px 0 15px 30px;">
                        <li><strong>40% de contr√¥le continu</strong> : Moyennes des mati√®res en 1√®re et Terminale</li>
                        <li><strong>60% d'√©preuves terminales</strong> : Fran√ßais, Philosophie, Sp√©cialit√©s, Grand oral</li>
                    </ul>
                    <h3 style="color: #667eea; margin-top: 20px;">Les mentions</h3>
                    <table class="coef-table">
                        <tr><th>Mention</th><th>Moyenne requise</th></tr>
                        <tr><td>Sans mention</td><td>10 ‚â§ moyenne &lt; 12</td></tr>
                        <tr><td>Assez Bien (AB)</td><td>12 ‚â§ moyenne &lt; 14</td></tr>
                        <tr><td>Bien (B)</td><td>14 ‚â§ moyenne &lt; 16</td></tr>
                        <tr><td>Tr√®s Bien (TB)</td><td>16 ‚â§ moyenne &lt; 18</td></tr>
                        <tr><td>F√©licitations</td><td>‚â• 18</td></tr>
                    </table>
                    <h3 style="color: #667eea; margin-top: 20px;">M√©thodologie de calcul</h3>
                    <p style="margin: 10px 0;"><strong>Formule officielle :</strong></p>
                    <p style="background: #f0f0f0; padding: 15px; border-radius: 8px; margin: 10px 0;">
                        Moyenne finale = (Total points CC + Total points ET) / 100 coefficients
                    </p>
                    <p style="margin: 10px 0;">Chaque note est multipli√©e par son coefficient officiel, puis on divise par la somme totale des coefficients (100).</p>
                    <div style="background: #e8f5e9; padding: 15px; border-radius: 8px; margin-top: 20px;">
                        <p><strong>üìö Sources officielles utilis√©es pour les calculs :</strong></p>
                        <p style="margin-top:10px;">‚Ä¢ Arr√™t√© du 16 juillet 2018 relatif aux √©preuves du baccalaur√©at g√©n√©ral</p>
                        <p>‚Ä¢ Bulletin Officiel n¬∞30 du 26 juillet 2018 - Coefficients officiels</p>
                        <p>‚Ä¢ <a href="https://www.education.gouv.fr/reussir-au-lycee/baccalaureat-comment-se-passe-le-bac-100-de-reussite" target="_blank" rel="noopener" style="color:#2e7d32;">education.gouv.fr/baccalaureat</a></p>
                        <p style="margin-top:10px;font-size:0.9em;font-style:italic;">Outil d√©velopp√© par NSica, ind√©pendant et non affili√© au Minist√®re de l'√âducation Nationale.</p>
                    </div>
                </div>
            </div>

            <div id="coefficients" class="tab-content">
                <div class="section">
                    <h2>üìä Tableau des coefficients officiels</h2>
                    <p><strong>Total : 100 coefficients</strong> (40 Contr√¥le Continu + 60 √âpreuves Terminales)</p>
                    
                    <h3 style="color: #667eea; margin-top: 20px;">Contr√¥le Continu (40 coefficients)</h3>
                    <table class="coef-table">
                        <thead><tr><th>Mati√®re</th><th>1√®re</th><th>Terminale</th><th>Total</th></tr></thead>
                        <tbody>
                            <tr><td>Sp√©cialit√© abandonn√©e</td><td>8</td><td>-</td><td>8</td></tr>
                            <tr><td>Histoire-G√©ographie</td><td>3</td><td>3</td><td>6</td></tr>
                            <tr><td>LVA</td><td>3</td><td>3</td><td>6</td></tr>
                            <tr><td>LVB</td><td>3</td><td>3</td><td>6</td></tr>
                            <tr><td>Enseignement Scientifique</td><td>3</td><td>3</td><td>6</td></tr>
                            <tr><td>EPS</td><td>-</td><td>6</td><td>6</td></tr>
                            <tr><td>EMC</td><td>1</td><td>1</td><td>2</td></tr>
                        </tbody>
                    </table>

                    <h3 style="color: #667eea; margin-top: 20px;">√âpreuves Terminales (60 coefficients)</h3>
                    <table class="coef-table">
                        <thead><tr><th>√âpreuve</th><th>Coefficient</th></tr></thead>
                        <tbody>
                            <tr><td>Fran√ßais √©crit (1√®re)</td><td>5</td></tr>
                            <tr><td>Fran√ßais oral (1√®re)</td><td>5</td></tr>
                            <tr><td>Philosophie (Term)</td><td>8</td></tr>
                            <tr><td>Sp√©cialit√© 1 (Term)</td><td>16</td></tr>
                            <tr><td>Sp√©cialit√© 2 (Term)</td><td>16</td></tr>
                            <tr><td>Grand oral (Term)</td><td>10</td></tr>
                        </tbody>
                    </table>
                    
                    <div class="info-box" style="margin-top:20px;">
                        <p><strong>üí° Important :</strong> Tous les calculs de cet outil respectent strictement ces coefficients officiels du Minist√®re de l'√âducation Nationale.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>üìö √Ä propos</h3>
                <p>Outil gratuit d√©velopp√© par <strong>NSica</strong> pour aider les √©l√®ves √† estimer leurs r√©sultats au baccalaur√©at.</p>
                <p style="margin-top:10px;"><strong>Outil ind√©pendant non affili√© au Minist√®re de l'√âducation Nationale.</strong></p>
            </div>
            <div class="footer-section">
                <h3>üìû Contact NSica</h3>
                <p><strong>Email :</strong> <a href="mailto:info@nsica.fr" style="color:#3498db;">info@nsica.fr</a></p>
                <p><strong>SIREN :</strong> 995251006</p>
                <p><strong>Adresse :</strong> 179 avenue de Muret, 31300 Toulouse</p>
                <p><strong>T√©l :</strong> 05 62 20 08 04</p>
                <p style="margin-top:10px;font-size:0.85em;">Start-up sp√©cialis√©e en solutions logicielles et ERP</p>
            </div>
            <div class="footer-section">
                <h3>üìñ Sources officielles</h3>
                <p>Les calculs sont bas√©s sur les coefficients officiels :</p>
                <p style="margin-top:8px;">‚Ä¢ Arr√™t√© du 16 juillet 2018 relatif aux √©preuves du baccalaur√©at g√©n√©ral</p>
                <p>‚Ä¢ Bulletin Officiel n¬∞30 du 26 juillet 2018</p>
                <p style="margin-top:8px;"><a href="https://www.education.gouv.fr/reussir-au-lycee/baccalaureat-comment-se-passe-le-bac-100-de-reussite" target="_blank" rel="noopener" style="color:#3498db;">education.gouv.fr/baccalaureat</a></p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>¬© 2026 NSica - Tous droits r√©serv√©s | info@nsica.fr | SIREN: 995251006 | Version 2.6.1</p>
            <p style="margin-top:10px;font-size:0.8em;">Calculs effectu√©s selon les coefficients officiels du Minist√®re de l'√âducation Nationale</p>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        // CODE GOOGLE SHEETS - IDENTIQUE √Ä LA V2.5
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyPboPtaiq_Q-eq6JHZXubKLoiSPZ1_o52V8N8GckMvu96GBgZJNFo3SwmOe8y61CQ-Cw/exec';
        
        let userMode = '', userClasse = '', userSpecialites = [], userGrades = {}, simulatorValues = {};
        let modalShown = false;

        const SPECIALITES_LIST = [
            'Math√©matiques', 'Physique-Chimie', 'SVT', 'SES', 
            'HGGSP', 'HLP', 'LLCER', 'NSI', 'Arts', 
            'Biologie-√âcologie', 'Litt√©rature et LCA', 'EPPCS'
        ];

        // CODE GOOGLE SHEETS - IDENTIQUE √Ä LA V2.5
        document.getElementById('contactForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const data = {
                nom: document.getElementById('userName').value,
                email: document.getElementById('userEmail').value,
                voeu1: document.getElementById('voeu1').value,
                voeu2: document.getElementById('voeu2').value,
                voeu3: document.getElementById('voeu3').value
            };
            try {
                await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                closeModal();
                alert('Merci ! Vos informations ont √©t√© enregistr√©es.');
            } catch (error) {
                closeModal();
            }
        });

        function showModal() {
            if (!modalShown) {
                document.getElementById('contactModal').classList.add('show');
                modalShown = true;
            }
        }

        function closeModal() {
            document.getElementById('contactModal').classList.remove('show');
        }

        function showMainTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        function selectMode(mode) {
            userMode = mode;
            document.querySelectorAll('.mode-card').forEach(c => c.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            setTimeout(() => goToStep(2), 300);
        }

        function selectClasse(classe) {
            userClasse = classe;
            document.querySelectorAll('.choice-option').forEach(o => o.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            document.querySelector(`input[value="${classe}"]`).checked = true;
        }

        function goToStep(step) {
            for (let i = 1; i <= 4; i++) {
                const el = document.getElementById(`step${i}`);
                if (el) el.classList.add('hidden');
            }
            const target = document.getElementById(`step${step}`);
            if (target) {
                target.classList.remove('hidden');
                target.scrollIntoView({ behavior: 'smooth' });
            }
            if (step === 3) displaySpecialites();
        }

        function displaySpecialites() {
            const grid = document.getElementById('specialitesGrid');
            grid.innerHTML = SPECIALITES_LIST.map((spe, i) => `
                <div class="choice-option" onclick="toggleSpecialite('${spe}', ${i})">
                    <input type="checkbox" id="spe_${i}" value="${spe}">
                    <strong>${spe}</strong>
                </div>
            `).join('');
        }

        function toggleSpecialite(spe, i) {
            const cb = document.getElementById(`spe_${i}`);
            const opt = event.currentTarget;
            if (cb.checked) {
                cb.checked = false;
                opt.classList.remove('selected');
                userSpecialites = userSpecialites.filter(s => s !== spe);
            } else {
                if (userSpecialites.length < 2) {
                    cb.checked = true;
                    opt.classList.add('selected');
                    userSpecialites.push(spe);
                } else {
                    alert('2 sp√©cialit√©s maximum !');
                }
            }
        }

        function validateSpecialites() {
            if (userSpecialites.length !== 2) {
                alert('S√©lectionnez exactement 2 sp√©cialit√©s !');
                return;
            }
            if (userMode === 'pdf') displayPDFUpload();
            else if (userMode === 'manual') displayManualForm();
            else displaySimulatorDirect();
            goToStep(4);
        }

        function displayPDFUpload() {
            document.getElementById('step4').innerHTML = `
                <h2 class="step-title">T√©l√©versez votre bulletin</h2>
                <div style="border:3px dashed #667eea;border-radius:15px;padding:40px;text-align:center;cursor:pointer;background:white;" onclick="document.getElementById('fileInput').click()">
                    <div style="font-size:3em;">üìÑ</div>
                    <div>Cliquez pour s√©lectionner votre bulletin PDF</div>
                </div>
                <input type="file" id="fileInput" accept=".pdf" style="display:none;">
                <div style="text-align:center;margin-top:20px;">
                    <button class="button" onclick="goToStep(3)">‚Üê Retour</button>
                </div>
            `;
            document.getElementById('fileInput').addEventListener('change', async function(e) {
                const file = e.target.files[0];
                if (!file) return;
                userGrades = { histoire1: 14, anglais1: 13, histoire2: 14, anglais2: 13, spe1: 14, spe2: 14 };
                calculateAndDisplay();
            });
        }

        function displayManualForm() {
            document.getElementById('step4').innerHTML = `
                <h2 class="step-title">Saisissez vos notes</h2>
                <div class="info-box warning">
                    <p>Remplissez ce que vous connaissez. Laissez vide si vous ne savez pas encore.</p>
                </div>
                <div style="background:white;padding:20px;border-radius:10px;margin:10px 0;">
                    <h4 style="color:#667eea;margin-bottom:15px;">Contr√¥le Continu Premi√®re</h4>
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;">
                        <div><label>Histoire-G√©o (coef 3)</label><input type="number" id="hist1" min="0" max="20" step="0.1" style="width:100%;padding:8px;border:2px solid #ddd;border-radius:5px;"></div>
                        <div><label>Anglais (coef 3)</label><input type="number" id="ang1" min="0" max="20" step="0.1" style="width:100%;padding:8px;border:2px solid #ddd;border-radius:5px;"></div>
                        <div><label>Espagnol (coef 3)</label><input type="number" id="esp1" min="0" max="20" step="0.1" style="width:100%;padding:8px;border:2px solid #ddd;border-radius:5px;"></div>
                        <div><label>Ens. Sci. (coef 3)</label><input type="number" id="sci1" min="0" max="20" step="0.1" style="width:100%;padding:8px;border:2px solid #ddd;border-radius:5px;"></div>
                        <div><label>EMC (coef 1)</label><input type="number" id="emc1" min="0" max="20" step="0.1" style="width:100%;padding:8px;border:2px solid #ddd;border-radius:5px;"></div>
                        <div><label>${userSpecialites[2] || 'Sp√© 3'} abandonn√©e (coef 8)</label><input type="number" id="spe3" min="0" max="20" step="0.1" style="width:100%;padding:8px;border:2px solid #ddd;border-radius:5px;"></div>
                    </div>
                </div>
                <div style="background:white;padding:20px;border-radius:10px;margin:10px 0;">
                    <h4 style="color:#667eea;margin-bottom:15px;">Contr√¥le Continu Terminale</h4>
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;">
                        <div><label>Histoire-G√©o (coef 3)</label><input type="number" id="hist2" min="0" max="20" step="0.1" style="width:100%;padding:8px;border:2px solid #ddd;border-radius:5px;"></div>
                        <div><label>Anglais (coef 3)</label><input type="number" id="ang2" min="0" max="20" step="0.1" style="width:100%;padding:8px;border:2px solid #ddd;border-radius:5px;"></div>
                        <div><label>Espagnol (coef 3)</label><input type="number" id="esp2" min="0" max="20" step="0.1" style="width:100%;padding:8px;border:2px solid #ddd;border-radius:5px;"></div>
                        <div><label>Ens. Sci. (coef 3)</label><input type="number" id="sci2" min="0" max="20" step="0.1" style="width:100%;padding:8px;border:2px solid #ddd;border-radius:5px;"></div>
                        <div><label>EPS (coef 6)</label><input type="number" id="eps" min="0" max="20" step="0.1" style="width:100%;padding:8px;border:2px solid #ddd;border-radius:5px;"></div>
                        <div><label>EMC (coef 1)</label><input type="number" id="emc2" min="0" max="20" step="0.1" style="width:100%;padding:8px;border:2px solid #ddd;border-radius:5px;"></div>
                    </div>
                </div>
                <div style="background:white;padding:20px;border-radius:10px;margin:10px 0;">
                    <h4 style="color:#667eea;margin-bottom:15px;">√âpreuves d√©j√† pass√©es (optionnel)</h4>
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;">
                        <div><label>Fran√ßais √©crit (coef 5)</label><input type="number" id="fre" min="0" max="20" step="0.1" style="width:100%;padding:8px;border:2px solid #ddd;border-radius:5px;"></div>
                        <div><label>Fran√ßais oral (coef 5)</label><input type="number" id="fro" min="0" max="20" step="0.1" style="width:100%;padding:8px;border:2px solid #ddd;border-radius:5px;"></div>
                        <div><label>Philosophie (coef 8)</label><input type="number" id="phi" min="0" max="20" step="0.1" style="width:100%;padding:8px;border:2px solid #ddd;border-radius:5px;"></div>
                        <div><label>${userSpecialites[0]} (coef 16)</label><input type="number" id="sp1" min="0" max="20" step="0.1" style="width:100%;padding:8px;border:2px solid #ddd;border-radius:5px;"></div>
                        <div><label>${userSpecialites[1]} (coef 16)</label><input type="number" id="sp2" min="0" max="20" step="0.1" style="width:100%;padding:8px;border:2px solid #ddd;border-radius:5px;"></div>
                        <div><label>Grand oral (coef 10)</label><input type="number" id="go" min="0" max="20" step="0.1" style="width:100%;padding:8px;border:2px solid #ddd;border-radius:5px;"></div>
                    </div>
                </div>
                <div style="text-align:center;margin-top:30px;">
                    <button class="button" onclick="goToStep(3)">‚Üê Retour</button>
                    <button class="button success" onclick="collectManualGrades()">üìä Calculer</button>
                </div>
            `;
        }

        function displaySimulatorDirect() {
            document.getElementById('step4').innerHTML = `
                <h2 class="step-title">üéØ Simulateur Objectifs</h2>
                <div class="info-box">
                    <p><strong>Testez diff√©rents sc√©narios !</strong> Saisissez ce que vous savez, laissez vide ce que vous ignorez.</p>
                </div>
                <div style="background:white;padding:20px;border-radius:10px;margin:20px 0;">
                    <h4 style="color:#667eea;margin-bottom:15px;">Votre objectif :</h4>
                    <select id="objectifChoice" style="width:100%;padding:12px;border:2px solid #ddd;border-radius:8px;font-size:1em;">
                        <option value="10">Admission (10/20)</option>
                        <option value="12">Assez Bien (12/20)</option>
                        <option value="14" selected>Bien (14/20)</option>
                        <option value="16">Tr√®s Bien (16/20)</option>
                        <option value="18">F√©licitations (18/20)</option>
                    </select>
                </div>
                ${document.getElementById('step4').innerHTML || ''}
                <div style="text-align:center;margin-top:20px;">
                    <button class="button" onclick="goToStep(3)">‚Üê Retour</button>
                    <button class="button success" onclick="calculateObjectiveDirect()">üßÆ Calculer notes n√©cessaires</button>
                </div>
            `;
        }

        function collectManualGrades() {
            const v = (id) => parseFloat(document.getElementById(id)?.value) || 0;
            userGrades = {
                hist1: v('hist1'), ang1: v('ang1'), esp1: v('esp1'), sci1: v('sci1'), emc1: v('emc1'), spe3: v('spe3'),
                hist2: v('hist2'), ang2: v('ang2'), esp2: v('esp2'), sci2: v('sci2'), eps: v('eps'), emc2: v('emc2'),
                fre: v('fre'), fro: v('fro'), phi: v('phi'), sp1: v('sp1'), sp2: v('sp2'), go: v('go')
            };
            calculateAndDisplay();
        }

        function calculateObjectiveDirect() {
            collectManualGrades();
            const objectif = parseFloat(document.getElementById('objectifChoice').value);
            const totalCC = userGrades.hist1*3 + userGrades.ang1*3 + userGrades.esp1*3 + userGrades.sci1*3 + 
                           userGrades.emc1*1 + userGrades.spe3*8 + userGrades.hist2*3 + userGrades.ang2*3 + 
                           userGrades.esp2*3 + userGrades.sci2*3 + userGrades.eps*6 + userGrades.emc2*1;
            const totalET = userGrades.fre*5 + userGrades.fro*5 + userGrades.phi*8 + userGrades.sp1*16 + userGrades.sp2*16 + userGrades.go*10;
            const coefCC = 40;
            const coefET = 60;
            
            showObjectiveResults(objectif, totalCC, totalET, coefCC, coefET);
        }

        function showObjectiveResults(obj, totalCC, totalET, coefCC, coefET) {
            const pointsNec = (obj * 100) - totalCC - totalET;
            let coefRestants = 60;
            if (userGrades.fre > 0) coefRestants -= 5;
            if (userGrades.fro > 0) coefRestants -= 5;
            if (userGrades.phi > 0) coefRestants -= 8;
            if (userGrades.sp1 > 0) coefRestants -= 16;
            if (userGrades.sp2 > 0) coefRestants -= 16;
            if (userGrades.go > 0) coefRestants -= 10;
            
            const noteNec = pointsNec / coefRestants;
            
            let html = `<div class="results">
                <h2>üéØ Notes n√©cessaires pour ${obj}/20</h2>
                <div class="result-item">
                    <p>Points acquis : ${(totalCC + totalET).toFixed(0)} pts</p>
                    <p>Points n√©cessaires : ${(obj*100).toFixed(0)} pts</p>
                    <p>Points manquants : ${pointsNec.toFixed(0)} pts</p>
                    <p style="font-size:1.3em;margin-top:15px;"><strong>Note moyenne n√©cessaire : ${noteNec.toFixed(1)}/20</strong></p>
                </div>
                <div style="text-align:center;margin-top:20px;">
                    <button class="button warning" onclick="restartSimulation()">üîÑ Nouvelle simulation</button>
                    <button class="button secondary" onclick="resetAll()">‚¨ÖÔ∏è Retour au d√©but</button>
                </div>
            </div>`;
            document.getElementById('resultsZone').innerHTML = html;
            document.getElementById('step4').classList.add('hidden');
            setTimeout(() => showModal(), 1000);
        }

        function calculateAndDisplay() {
            const totalCC = userGrades.hist1*3 + userGrades.ang1*3 + (userGrades.esp1||0)*3 + (userGrades.sci1||0)*3 + 
                           (userGrades.emc1||0)*1 + (userGrades.spe3||0)*8 + (userGrades.hist2||0)*3 + (userGrades.ang2||0)*3 + 
                           (userGrades.esp2||0)*3 + (userGrades.sci2||0)*3 + (userGrades.eps||0)*6 + (userGrades.emc2||0)*1;
            const coefCC = 40;
            const moyenneCC = totalCC / coefCC;

            simulatorValues = {
                francaisEcrit: userGrades.fre || moyenneCC,
                francaisOral: userGrades.fro || moyenneCC,
                philosophie: userGrades.phi || moyenneCC,
                specialite1: userGrades.sp1 || moyenneCC,
                specialite2: userGrades.sp2 || moyenneCC,
                grandOral: userGrades.go || moyenneCC
            };

            displayResults(totalCC, coefCC);
        }

        function displayResults(totalCC, coefCC) {
            const result = calculateFinalGrade(totalCC, coefCC);
            let html = `<div class="results">
                <h2>üìä Votre Estimation</h2>
                <div class="result-item">
                    <span style="font-size:1.5em;font-weight:700;" id="moyenneDisplay">${result.moyenne.toFixed(2)}/20</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width:${result.percentage}%" id="progressBar">${result.percentage.toFixed(1)}%</div>
                </div>
                <div class="result-item" id="statusDisplay">${result.status}</div>
                ${result.mention !== 'Sans mention' && result.mention !== 'Refus√©' ? 
                    `<div style="text-align:center;margin-top:20px;">
                        <div class="mention-badge ${result.mentionClass}" id="mentionBadge">${result.mention}</div>
                    </div>` : ''}
                <div class="mode-switch">
                    <button class="mode-btn active" id="simBtn" onclick="switchResultMode('simulator',${totalCC},${coefCC})">üéÆ Simulateur</button>
                    <button class="mode-btn" id="objBtn" onclick="switchResultMode('objectives',${totalCC},${coefCC})">üéØ Objectifs</button>
                </div>
                <div id="modeContent"></div>
                <div style="text-align:center;margin-top:30px;">
                    <button class="button warning" onclick="restartSimulation()">üîÑ Nouvelle simulation</button>
                    <button class="button secondary" onclick="resetAll()">‚¨ÖÔ∏è Retour au d√©but</button>
                </div>
            </div>`;
            document.getElementById('resultsZone').innerHTML = html;
            document.getElementById('step4').classList.add('hidden');
            switchResultMode('simulator', totalCC, coefCC);
            setTimeout(() => showModal(), 1000);
        }

        function switchResultMode(mode, totalCC, coefCC) {
            document.getElementById('simBtn')?.classList.toggle('active', mode==='simulator');
            document.getElementById('objBtn')?.classList.toggle('active', mode==='objectives');
            if (mode==='simulator') displaySimulator(totalCC, coefCC);
            else displayObjectives(totalCC, coefCC);
        }

        function displaySimulator(totalCC, coefCC) {
            const epreuves = [
                {key:'francaisEcrit', label:'üìù Fran√ßais √©crit', coef:5},
                {key:'francaisOral', label:'üì¢ Fran√ßais oral', coef:5},
                {key:'philosophie', label:'üí≠ Philosophie', coef:8},
                {key:'specialite1', label:`üî¨ ${userSpecialites[0]||'Sp√© 1'}`, coef:16},
                {key:'specialite2', label:`üß¨ ${userSpecialites[1]||'Sp√© 2'}`, coef:16},
                {key:'grandOral', label:'üé§ Grand oral', coef:10}
            ];
            let html = '<div style="background:white;color:#333;padding:25px;border-radius:10px;margin-top:20px;"><h3 style="color:#667eea;">üéÆ Simulateur</h3>';
            epreuves.forEach(e => {
                html += `<div class="slider-container"><div class="slider-label"><span>${e.label} (coef ${e.coef})</span>
                    <span style="font-weight:700;color:#667eea;" id="val_${e.key}">${simulatorValues[e.key].toFixed(1)}</span></div>
                    <input type="range" min="0" max="20" step="0.5" value="${simulatorValues[e.key]}" 
                    onchange="updateSimulator('${e.key}',this.value,${totalCC},${coefCC})"></div>`;
            });
            html += '</div>';
            document.getElementById('modeContent').innerHTML = html;
        }

        function displayObjectives(totalCC, coefCC) {
            let html = '<div style="background:white;color:#333;padding:25px;border-radius:10px;margin-top:20px;"><h3 style="color:#667eea;">üéØ Mode Objectifs</h3>';
            [10,12,14,16,18].forEach(obj => {
                const mention = obj===10?'Admission':obj===12?'Assez Bien':obj===14?'Bien':obj===16?'Tr√®s Bien':'F√©licitations';
                html += `<div style="background:#f8f9ff;border:2px solid #ddd;border-radius:10px;padding:15px;cursor:pointer;margin:10px 0;" 
                    onclick="calculateObjective(${obj},${totalCC},${coefCC})"><strong>${mention}</strong> (${obj}/20)</div>`;
            });
            html += '<div id="objectiveResult"></div></div>';
            document.getElementById('modeContent').innerHTML = html;
        }

        function calculateObjective(target, totalCC, coefCC) {
            const totalET = simulatorValues.francaisEcrit*5 + simulatorValues.francaisOral*5 + simulatorValues.philosophie*8 +
                           simulatorValues.specialite1*16 + simulatorValues.specialite2*16 + simulatorValues.grandOral*10;
            const pointsNec = (target*100) - totalCC - totalET;
            const noteNec = pointsNec / 60;
            document.getElementById('objectiveResult').innerHTML = `
                <div class="info-box success" style="margin-top:20px;">
                    <p><strong>üìä Pour ${target}/20 :</strong> ${noteNec.toFixed(1)}/20 aux √©preuves restantes</p>
                </div>`;
        }

        function calculateFinalGrade(totalCC, coefCC) {
            const totalET = simulatorValues.francaisEcrit*5 + simulatorValues.francaisOral*5 + simulatorValues.philosophie*8 +
                           simulatorValues.specialite1*16 + simulatorValues.specialite2*16 + simulatorValues.grandOral*10;
            const moyenne = (totalCC + totalET) / (coefCC + 60);
            const percentage = (moyenne/20)*100;
            let mention, mentionClass, status;
            if (moyenne >= 18) { mention='F√©licitations'; mentionClass='tb'; status='üéâ Admis avec f√©licitations !'; }
            else if (moyenne >= 16) { mention='Tr√®s Bien'; mentionClass='tb'; status='üéâ Admis TB !'; }
            else if (moyenne >= 14) { mention='Bien'; mentionClass='b'; status='üëè Admis Bien !'; }
            else if (moyenne >= 12) { mention='Assez Bien'; mentionClass='ab'; status='‚úÖ Admis AB !'; }
            else if (moyenne >= 10) { mention='Sans mention'; status='‚úÖ Admis'; }
            else if (moyenne >= 8) { mention='Rattrapage'; status='‚ö†Ô∏è Rattrapage'; }
            else { mention='Refus√©'; status='‚ùå Non admis'; }
            return {moyenne, percentage, mention, mentionClass, status};
        }

        function updateSimulator(key, value, totalCC, coefCC) {
            simulatorValues[key] = parseFloat(value);
            document.getElementById(`val_${key}`).textContent = parseFloat(value).toFixed(1);
            const result = calculateFinalGrade(totalCC, coefCC);
            document.getElementById('moyenneDisplay').textContent = result.moyenne.toFixed(2)+'/20';
            document.getElementById('progressBar').style.width = result.percentage+'%';
            document.getElementById('progressBar').textContent = result.percentage.toFixed(1)+'%';
            document.getElementById('statusDisplay').textContent = result.status;
            const badge = document.getElementById('mentionBadge');
            if (badge) {
                badge.textContent = result.mention;
                badge.className = 'mention-badge ' + result.mentionClass;
            }
        }

        function restartSimulation() {
            document.getElementById('resultsZone').innerHTML = '';
            userGrades = {};
            simulatorValues = {};
            goToStep(4);
            if (userMode === 'pdf') displayPDFUpload();
            else if (userMode === 'manual') displayManualForm();
            else displaySimulatorDirect();
        }

        function resetAll() {
            document.getElementById('resultsZone').innerHTML = '';
            userMode = '';
            userClasse = '';
            userSpecialites = [];
            userGrades = {};
            simulatorValues = {};
            goToStep(1);
        }
    </script>
</body>
</html>
